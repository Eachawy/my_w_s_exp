// Generated by CoffeeScript 1.4.0
/*
Sticky Elements Shortcut for jQuery Waypoints - v2.0.2
Copyright (c) 2011-2013 Caleb Troughton
Dual licensed under the MIT license and GPL license.
https://github.com/imakewebthings/jquery-waypoints/blob/master/licenses.txt
*/
(function(){"use strict";(function(t,n){if(typeof define==="function"&&define.amd){return define(["jquery","waypoints"],n)}else{return n(t.jQuery)}})(this,function(t){var n,e;n={wrapper:'<div class="sticky-wrapper" />',stuckClass:"stuck"};e=function(n,e){n.wrap(e.wrapper);n.each(function(){var n;n=t(this);n.parent().css('min-height',n.outerHeight());return true});return n.parent()};return t.waypoints("extendFn","sticky",function(r){var i,a;r=t.extend({},t.fn.waypoint.defaults,n,r);i=e(this,r);a=r.handler;r.handler=function(n){var e,i;e=t(this).children(":first");i=n==="down"||n==="right";e.toggleClass(r.stuckClass,i);if(a!=null){return a.call(this,n)}};i.waypoint(r);return this})})}).call(this);


(function($) { // run this code on page load (AKA DOM load)

	"use strict";

	$(window).load(function() 
	{	
		setTimeout( function() // set timeout for all header changes to be made
		{
			var header_height = $('#header').height(),
				offset_value = - header_height;
			
			$('#header').waypoint('sticky', {
				offset: offset_value
			});			
			
		}, 500 );
		
	});


	$( function () {
	 
		/* set variables locally for increased performance*/
		var displayed = false;
		var $message = $('#header');
		var $window = $(window);
	 
		/* react to scroll event on window*/
		$window.scroll(
		
			function ()
			{
				var	top = $('.sticky-wrapper').height() + 100;		
				
				// Check page is not using acoda-page-animate
				if( ! $('.acoda-page-animate').length )
				{					
					if( $window.scrollTop() <= top ) // hide if at the top of the page
					{
						if( $('#primary-wrapper').hasClass('transparent') )
						{
							$('#header-wrap').addClass('transparent');
						}
							
						$('.dock-panel-wrap.dock_layout_2 .dock-panel-inner,.dock-panel-wrap.dock_layout_3 .dock-panel-inner').animate({top : 0 });
							
						displayed = false;
							
						$message.removeClass('animate').delay(300).queue(function(transremove) 
						{
							$message.removeClass('transition');
							
							transremove();
							
							//$(window).trigger('resize');
						});
							
					}
					else if( displayed === false && $window.width() >= 1025 ) // show if scrolling down
					{

	
						displayed = true;
						
						$message.stop(true, true).delay(500).queue(function(transadd) 
						{

							if( $('#primary-wrapper').hasClass('transparent') )
							{
								$('#header-wrap').removeClass('transparent');
							}							
							
							$message.addClass('animate transition');
							$('.dock-panel-wrap.dock_layout_2 .dock-panel-inner,.dock-panel-wrap.dock_layout_3 .dock-panel-inner').animate({top : $('#header-wrap').height() }, 300 );	
							transadd();
						});
					}
				}
			}
		);
		
	});

})(jQuery);